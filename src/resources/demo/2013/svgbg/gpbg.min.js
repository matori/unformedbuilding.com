/**
 * @fileOverview
 * @name GPBG.js
 * @author Matori
 * @license MIT License
 */
(function(f,g){var h=function(){this._svgns="http://www.w3.org/2000/svg";this._activate=!1;this._init()};h.prototype={_getDefault:function(){return{apexes:[0],count:30,minRadius:20,maxRadius:60,minRgbRange:160,maxRgbRange:240,fillOpacity:0.3,strokeWidth:1,strokeOpacity:0.5,grayscale:!1}},_init:function(){g.createElementNS&&(g.createElementNS(this._svgns,"svg").createSVGRect&&Object.keys&&f.XMLSerializer)&&(this._activate=!0);if(!0===this._activate){g.getElementsByTagName("head")[0].appendChild(g.createElement("style"));
this._css=g.styleSheets[g.styleSheets.length-1];this._xmlSerializer=new XMLSerializer;var c=this._createElementSVG("svg");this._xmlnsString=0<this._xmlSerializer.serializeToString(c).indexOf("xmlns")}},die:function(){try{delete f.GPBG}catch(c){f.GPBG=void 0}},draw:function(c,b){var a,e,d;if(!1!==this._activate&&(a=g.querySelectorAll(c),0!==a.length)){if(1<a.length){e=[];d=[];for(var j=0,m=a.length;j<m;++j)e.push(a[j].clientHeight),d.push(a[j].clientWidth);e=Math.max.apply(null,e);d=Math.max.apply(null,
d)}else e=a[0].clientHeight,d=a[0].clientWidth,"body"===a[0].tagName.toLowerCase()&&(e=e<f.innerHeight?f.innerHeight:e,d=d<f.innerWidth?f.innerWidth:d);a=this.getImage(d,e,b);a='url("'+this.svgToDataUrl(a)+'")';this._css.insertRule(c+"{background-image:"+a+"}",this._css.cssRules.length)}},getImage:function(c,b,a){if(!1===this._activate)return!1;a=a||{};a=this._extend(this._getDefault(),a);return this._createImage(c,b,a)},svgToDataUrl:function(c){if(!1===this._activate)return!1;c=this._xmlSerializer.serializeToString(c);
return c="data:image/svg+xml,"+encodeURIComponent(c)},_extend:function(c,b){for(var a=Object.keys(b),e=0,d=a.length;e<d;++e)c[a[e]]=b[a[e]];return c},_createElementSVG:function(c,b){var a=g.createElementNS(this._svgns,c);b&&0<Object.keys(b).length&&(a=this._setAttributes(a,b));return a},_setAttributes:function(c,b){for(var a=Object.keys(b),e=0,d=a.length;e<d;++e)c.setAttribute(a[e],b[a[e]]);return c},_getRandomNumber:function(c,b,a){a=a||!0;b=Math.random()*(b-c);!0===a&&(b=Math.floor(b));return b+
c},_createFigure:function(c,b){function a(){for(var a=2*Math.PI/c,d=e._getRandomNumber(0,180)*Math.PI/180,f=[],g=0;g<c;++g){var k=Math.cos(a*g+d)*b.radius+b.coordinateX,n=Math.sin(a*g+d)*b.radius+b.coordinateY;f.push(k+","+n)}return f.join(" ")}var e=this,d;d=0===c?e._createElementSVG("circle",{cx:b.coordinateX,cy:b.coordinateY,r:b.radius}):e._createElementSVG("polygon",{points:a()});return d=e._setAttributes(d,{fill:b.color,stroke:b.color,"fill-opacity":b.fillOpacity,"stroke-width":b.strokeWidth,
"stroke-opacity":b.strokeOpacity})},_createImage:function(c,b,a){function e(){var b=[];if(!1===a.grayscale)for(var c=0;3>c;++c)b.push(d._getRandomNumber(a.minRgbRange,a.maxRgbRange));else b[0]=b[1]=b[2]=d._getRandomNumber(a.minRgbRange,a.maxRgbRange);return"rgb("+b.join(",")+")"}var d=this,g=d._createElementSVG("svg",{version:"1.1",width:c,height:b,viewBox:[0,0,c,b].join(" ")}),f,h=a.apexes.length;d._xmlnsString||d._setAttributes(g,{xmlns:d._svgns});for(var l=0,k=a.count;l<k;++l)f=1<h?a.apexes[d._getRandomNumber(0,
h)]:a.apexes[0],3>f&&(f=0),f=d._createFigure(f,{coordinateX:d._getRandomNumber(0,c,!1),coordinateY:d._getRandomNumber(0,b,!1),radius:a.minRadius===a.maxRadius?a.minRadius:d._getRandomNumber(a.minRadius,a.maxRadius,!1),color:e(),fillOpacity:a.fillOpacity,strokeWidth:a.strokeWidth,strokeOpacity:a.strokeOpacity}),g.appendChild(f);return g}};f.GPBG=h})(window,document);